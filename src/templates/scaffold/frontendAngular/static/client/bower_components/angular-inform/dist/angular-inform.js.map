{"version":3,"sources":["angular-inform-header.js","angular-inform.js","controller.js","directive.js","provider.js","exception/exception.js","exception/http.js","angular-inform-templates.js","angular-inform-footer.js"],"names":[],"mappings":"AAAA;GACA;GACA;GACA;AACA;AACA;;ACLA;;;ACAA,mBAAA,UAAA,GAAA,qBAAA;;EAEA;EACA;EACA;EACA;;AAEA,CAAA,CAAA;;ACPA,kBAAA,MAAA;EACA;IACA;IACA;IACA,aAAA,UAAA;EACA;AACA;ACNA,iBAAA,MAAA;;EAEA;;EAEA;IACA;IACA;EACA;;EAEA;IACA;IACA;EACA;;;EAGA;;IAEA;;IAEA;MACA;;MAEA;QACA;UACA;QACA;MACA;;MAEA;IACA;;IAEA;MACA;QACA;QACA;MACA;IACA;;IAEA;;MAEA;;MAEA;QACA;UACA;QACA;MACA;IACA;;IAEA;;MAEA;;MAEA;QACA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;;QAEA;QACA;;MAEA;;QAEA;;QAEA;UACA;QACA;;QAEA;QACA;;QAEA;MACA;;MAEA;;MAEA;IACA;;IAEA;;MAEA;QACA;MACA;;MAEA;QACA;QACA;MACA;IACA;;IAEA;MACA;IACA;;IAEA;MACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;;AAEA;;ACjHA;EACA,QAAA,aAAA;IACA,oBAAA,iBAAA;;MAEA;;MAEA;QACA;UACA;UACA;QACA;UACA;QACA;QACA;MACA;IACA;EACA,CAAA,CAAA;;ACjBA;;EAEA,UAAA,qBAAA,GAAA,iBAAA;;IAEA;MACA;QACA;QACA;MACA;QACA;MACA;;MAEA;IACA;;IAEA;MACA;MACA;IACA;;EAEA,CAAA,CAAA;;EAEA,QAAA,kBAAA;IACA,iCAAA,qBAAA;EACA,CAAA,CAAA;;ACxBA;AACA;AACA;AACA;EACA;AACA;ACLA","file":"angular-inform.js","sourcesContent":["/*!\n   angular-inform v0.0.18\n   (c) 2014 (null) McNull https://github.com/McNull/angular-inform\n   License: MIT\n*/\n(function(angular) {\n","var inform = angular.module('inform', []);\n\n","inform.controller('InformCtrl', function($scope, inform) {\n\n  $scope.messages = inform.messages();\n  $scope.remove = inform.remove;\n  $scope.cancelTimeout = inform.cancelTimeout;\n  $scope.setTimeout = inform.setTimeout;\n\n});\n","inform.directive('inform', function () {\n  return {\n    restrict: 'AE',\n    templateUrl: 'angular-inform/directive.ng.html',\n    controller: 'InformCtrl'\n  };\n});","inform.provider('inform', function () {\n\n  var provider = this;\n\n  this._defaults = {\n    type: 'default',\n    ttl: 5000\n  };\n\n  this.defaults = function (options) {\n    provider._defaults = angular.extend(provider._defaults, options || {});\n    return provider._defaults;\n  };\n\n\n  this.$get = ['$timeout', '$sce', function ($timeout, $sce) {\n\n    var _messages = [];\n\n    function _indexOf(predicate) {\n      var i = _messages.length;\n\n      while (i--) {\n        if (predicate(_messages[i])) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n\n    function cancelTimeout(msg) {\n      if (msg.timeout) {\n        $timeout.cancel(msg.timeout);\n        delete msg.timeout;\n      }\n    }\n\n    function setTimeout(msg) {\n\n      cancelTimeout(msg);\n\n      if (msg.ttl > 0) {\n        msg.timeout = $timeout(function () {\n          remove(msg);\n        }, msg.ttl);\n      }\n    }\n\n    function add(content, options) {\n\n      var msg = angular.extend({}, provider._defaults, options);\n\n      if(!angular.isString(content)) {\n        content = '<pre><code>' + JSON.stringify(content, null, '  ') + '</code></pre>';\n        msg.html = true;\n      }\n\n      var idx = _indexOf(function (x) {\n        return x.content.toString() === content && x.type == msg.type;\n      });\n\n      if (idx >= 0) {\n\n        msg = _messages[idx];\n        msg.count += 1;\n\n      } else {\n\n        msg.content = content;\n\n        if(msg.html) {\n          msg.content = $sce.trustAsHtml(content);\n        }\n\n        msg.tickCount = +new Date();\n        msg.count = 1;\n\n        _messages.push(msg);\n      }\n\n      setTimeout(msg);\n\n      return msg;\n    }\n\n    function remove(msg) {\n\n      var idx = _indexOf(function (x) {\n        return x === msg;\n      });\n\n      if (idx >= 0) {\n        _messages.splice(idx, 1);\n        cancelTimeout(msg);\n      }\n    }\n\n    function clear() {\n      _messages.length = 0;\n    }\n\n    return {\n      messages: function () {\n        return _messages;\n      },\n      add: add,\n      remove: remove,\n      clear: clear,\n      cancelTimeout: cancelTimeout,\n      setTimeout: setTimeout\n    };\n  }];\n\n});","\nangular.module('inform-exception', ['inform'])\n  .config(function($provide) {\n    $provide.decorator('$exceptionHandler', ['$delegate', '$injector',function($delegate, $injector) {\n\n      var inform;\n\n      return function(exception, cause) {\n        try {\n          inform = inform || $injector.get('inform');\n          inform.add(exception.toString(), { type: 'danger', ttl: 0 });\n        } catch(ex) {\n          console.log('$exceptionHandler', ex);\n        }\n        $delegate(exception, cause);\n      };\n    }]);\n  });\n","angular.module('inform-http-exception', ['inform'])\n\n  .factory('informHttpInterceptor', function ($q, inform) {\n\n    function interceptor(rejection) {\n      try {\n        var msg = 'Network error (' + rejection.status + '): ' + rejection.statusText;\n        inform.add(msg, { type: 'danger', ttl: 0});\n      } catch(ex) {\n        console.log('$httpProvider', ex);\n      }\n\n      return $q.reject(rejection);\n    }\n\n    return {\n      requestError: interceptor,\n      responseError: interceptor\n    };\n\n  })\n\n  .config(function ($httpProvider) {\n    $httpProvider.interceptors.push('informHttpInterceptor');\n  });\n","// Automatically generated.\n// This file is already embedded in your main javascript output, there's no need to include this file\n// manually in the index.html. This file is only here for your debugging pleasures.\nangular.module('inform').run(['$templateCache', function($templateCache){\n  $templateCache.put('angular-inform/directive.ng.html', '<div class=\\\"inform\\\"><div ng-repeat=\\\"msg in messages | orderBy:\\'-tickCount\\'\\\" class=\\\"inform-message-wrap\\\"><div class=\\\"inform-message alert alert-{{ msg.type }} alert-dismissible\\\" role=\\\"alert\\\" ng-mouseenter=\\\"cancelTimeout(msg)\\\" ng-mouseleave=\\\"setTimeout(msg)\\\"><button type=\\\"button\\\" class=\\\"close\\\" ng-click=\\\"remove(msg)\\\"><span>&times;</span></button> <span class=\\\"inform-message-content\\\"><span class=\\\"badge inform-badge\\\" ng-if=\\\"msg.count > 1\\\">{{ msg.count }}</span> <span ng-if=\\\"msg.html\\\" ng-bind-html=\\\"msg.content\\\"></span> <span ng-if=\\\"!msg.html\\\" ng-bind=\\\"msg.content\\\"></span></span></div></div></div>');\n}]);","})(angular);"],"sourceRoot":"../src/angular-inform"}